<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>daugia.vin — Đấu giá minh bạch trên blockchain</title>
  <meta name="description" content="DApp đấu giá on-chain trên Viction (VIC). Tìm kiếm, theo dõi, tạo và xem các cuộc đấu giá minh bạch — công bằng — bất biến." />

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="vin64.png" />
  <link rel="icon" type="image/png" sizes="64x64" href="vin64.png" />
  <link rel="apple-touch-icon" sizes="128x128" href="vin128.png" />
  <link rel="shortcut icon" href="vin64.png" />

  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- Top Navigation -->
  <header class="nav">
    <div class="nav__left">
      <img id="logo" src="vin128.png" alt="VIN" />
      <div class="brand">
        <h1>daugia.vin</h1>
        <p class="tagline">Minh bạch & Công bằng trên blockchain</p>
      </div>
    </div>

    <div class="nav__right">
      <!-- Giá VIN (USD) -->
      <div class="net-pill" id="vin-price-pill">
        <span id="vin-price">đang tải…</span>
      </div>

      <!-- Menu chính -->
      <a id="menu-guide" class="btn btn-ghost" href="https://t.me/daugiavin" target="_blank" rel="noopener">Hướng dẫn</a>
      <a id="menu-create" class="btn btn-outline hidden" href="#" title="Tạo cuộc đấu giá">Tạo cuộc đấu giá</a>
      <button id="btn-register" class="btn btn-outline hidden" title="Đăng ký tổ chức — phí 1$ VIN">Đăng ký</button>

      <!-- Wallet -->
      <div id="wallet-chip" class="wallet-chip hidden">
        <span id="wallet-address">0x…</span>
        <span class="sep">•</span><span id="bal-vic">VIC: -</span>
        <span class="sep">•</span><span id="bal-vin">VIN: -</span>
      </div>
      <button id="btn-connect" class="btn btn-primary" title="Kết nối ví (Viction)">Kết nối ví</button>
      <button id="btn-disconnect" class="btn btn-secondary hidden" title="Ngắt kết nối ví">Ngắt kết nối</button>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="hero__content" style="text-align:center;">
      <h2 style="font-size:26px; margin-bottom:8px;">Minh bạch — Công bằng — Bất biến</h2>
      <p class="muted" style="max-width:820px; margin:0 auto 16px;">
        Nền tảng vận hành hoàn toàn tự động bằng <strong>hợp đồng thông minh</strong> trên chuỗi; mọi người có thể tự kiểm chứng qua liên kết <strong>“Hợp đồng đấu giá”</strong> ở cuối trang.
        Nền tảng <strong>không nắm giữ tiền đặt cọc hay tiền bán tài sản</strong>; các khoản này do <strong>bên tổ chức đấu giá</strong> thực hiện ngoài chuỗi (off-chain).
        Nhiệm vụ duy nhất là tạo ra một cuộc đấu giá <strong>công khai, minh bạch và công bằng</strong> — không ai can thiệp.
        Vui lòng xem kỹ <a href="https://t.me/daugiavin" target="_blank" rel="noopener">Hướng dẫn sử dụng</a> hoặc tham gia Telegram <a href="https://t.me/daugiavin" target="_blank" rel="noopener">@daugiavin</a> để trao đổi chi tiết.
      </p>
    </div>
  </section>

  <!-- Search bar: 1 ô + 3 nút -->
  <section class="toolbar">
    <div class="toolbar__row" style="max-width:1080px; margin:0 auto; align-items:end; gap:10px;">
      <div class="field" style="flex:1 1 560px; min-width:280px;">
        <div style="display:flex; gap:6px;">
          <input id="inp-organizer" type="text" placeholder="Tìm kiếm (theo địa chỉ ví người tạo cuộc đấu giá — 0x…)" />
          <button id="btn-search" class="btn">Tìm</button>
          <button id="btn-follow-add" class="btn btn-secondary">Theo dõi</button>
          <button id="btn-follow-clear" class="btn btn-ghost" title="Xóa danh sách theo dõi">Xóa</button>
        </div>
      </div>
    </div>
  </section>

  <!-- Danh sách cuộc đấu giá -->
  <main class="container" id="auction-list"></main>

  <!-- Toast -->
  <div id="toast" class="toast hidden"></div>

  <!-- Footer dock -->
  <footer class="footer">
    <div class="footer__row">
      <a href="https://t.me/daugiavin" target="_blank" rel="noopener">Telegram</a>
      <span class="sep">•</span>
      <a href="https://vicscan.xyz/address/0x1765e20ecB8cD78688417A6d4123f2b899775599" target="_blank" rel="noopener">Hợp đồng đấu giá</a>
      <span class="sep">•</span>
      <a href="https://vicscan.xyz/token/0x941F63807401efCE8afe3C9d88d368bAA287Fac4" target="_blank" rel="noopener">VIN token</a>
      <span class="sep">•</span>
      <a href="https://vinswap.vin" target="_blank" rel="noopener">Swap VIN/VIC</a>
      <span class="sep">•</span>
      <a href="https://t.me/daugiavin" target="_blank" rel="noopener">Hướng dẫn</a>
    </div>
    <div class="footer__row muted">
      daugia.vin — dữ liệu on-chain • không lưu trữ thông tin cá nhân • giao dịch ký trên ví của bạn
    </div>
  </footer>

  <!-- Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js" crossorigin="anonymous"></script>

  <!-- Giá VIN: VIC/USDT → 1 VIN = VIC * 100 -->
  <script>
    const BINANCE_API_URL = "https://api.binance.com/api/v3/ticker/price?symbol=VICUSDT";
    async function updateVinPrice() {
      const el = document.getElementById("vin-price");
      if (!el) return;
      try {
        const res = await fetch(BINANCE_API_URL, { cache: "no-store" });
        const data = await res.json();
        const vicPrice = parseFloat(data.price);
        if (Number.isFinite(vicPrice)) {
          const vinPrice = vicPrice * 100;
          el.textContent = `1 VIN = ${vinPrice.toFixed(2)} USD`;
        } else el.textContent = "Price unavailable";
      } catch {
        el.textContent = "Price unavailable";
      }
    }
    document.addEventListener("DOMContentLoaded", updateVinPrice);
    setInterval(updateVinPrice, 60000);
  </script>

  <!-- App script -->
  <script src="app.js"></script>
</body>
</html>
